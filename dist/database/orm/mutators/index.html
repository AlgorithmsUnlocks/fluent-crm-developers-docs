<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fluent ORM: Mutators | FluentCRM Developers</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/assets/img/logo.svg" color="#7742e6">
    <link rel="apple-touch-icon" href="/assets/img/logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,500;0,700;1,300;1,500;1,700&amp;display=auto">
    <meta name="description" content="Resources and tutorials for FluentCRM developers">
    <meta name="theme-color" content="#7742e6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/assets/img/icon.svg">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.6c970851.css" as="style"><link rel="preload" href="/assets/js/app.c076c778.js" as="script"><link rel="preload" href="/assets/js/4.202d7228.js" as="script"><link rel="preload" href="/assets/js/37.a342a481.js" as="script"><link rel="preload" href="/assets/js/6.25d6c35f.js" as="script"><link rel="preload" href="/assets/js/5.36d7588c.js" as="script"><link rel="prefetch" href="/assets/js/1.ccc50939.js"><link rel="prefetch" href="/assets/js/10.dbb1ebd6.js"><link rel="prefetch" href="/assets/js/11.ba5f3ce1.js"><link rel="prefetch" href="/assets/js/12.e2c38e4f.js"><link rel="prefetch" href="/assets/js/13.b4eb5eab.js"><link rel="prefetch" href="/assets/js/14.a0380487.js"><link rel="prefetch" href="/assets/js/15.6ceb17ba.js"><link rel="prefetch" href="/assets/js/16.82a762ec.js"><link rel="prefetch" href="/assets/js/17.57163460.js"><link rel="prefetch" href="/assets/js/18.6893da32.js"><link rel="prefetch" href="/assets/js/19.31d9feba.js"><link rel="prefetch" href="/assets/js/20.e623d0f9.js"><link rel="prefetch" href="/assets/js/21.67455a0a.js"><link rel="prefetch" href="/assets/js/22.9a6b831e.js"><link rel="prefetch" href="/assets/js/23.0f4f93db.js"><link rel="prefetch" href="/assets/js/24.2792d199.js"><link rel="prefetch" href="/assets/js/25.20c93c42.js"><link rel="prefetch" href="/assets/js/26.8b514822.js"><link rel="prefetch" href="/assets/js/27.22025ef6.js"><link rel="prefetch" href="/assets/js/28.db94a07f.js"><link rel="prefetch" href="/assets/js/29.ecca083f.js"><link rel="prefetch" href="/assets/js/30.95ccd08e.js"><link rel="prefetch" href="/assets/js/31.6a5bbe0f.js"><link rel="prefetch" href="/assets/js/32.494705f4.js"><link rel="prefetch" href="/assets/js/33.697338b6.js"><link rel="prefetch" href="/assets/js/34.44d26190.js"><link rel="prefetch" href="/assets/js/35.4fa6451d.js"><link rel="prefetch" href="/assets/js/36.8e37d602.js"><link rel="prefetch" href="/assets/js/38.e15dffa6.js"><link rel="prefetch" href="/assets/js/39.c202230a.js"><link rel="prefetch" href="/assets/js/40.87859927.js"><link rel="prefetch" href="/assets/js/41.7f44ba2e.js"><link rel="prefetch" href="/assets/js/42.a88b9b5e.js"><link rel="prefetch" href="/assets/js/43.3363e912.js"><link rel="prefetch" href="/assets/js/44.e3946ee0.js"><link rel="prefetch" href="/assets/js/45.205e387b.js"><link rel="prefetch" href="/assets/js/46.d1c5f904.js"><link rel="prefetch" href="/assets/js/47.ca803f4a.js"><link rel="prefetch" href="/assets/js/48.8d74c959.js"><link rel="prefetch" href="/assets/js/49.0b4256d2.js"><link rel="prefetch" href="/assets/js/50.5130c7e7.js"><link rel="prefetch" href="/assets/js/51.d87f0f67.js"><link rel="prefetch" href="/assets/js/52.a612a564.js"><link rel="prefetch" href="/assets/js/53.cd6054f9.js"><link rel="prefetch" href="/assets/js/54.5a3316a8.js"><link rel="prefetch" href="/assets/js/55.4d416579.js"><link rel="prefetch" href="/assets/js/56.3a4f5865.js"><link rel="prefetch" href="/assets/js/57.6ccfd1cc.js"><link rel="prefetch" href="/assets/js/58.7eb15f0c.js"><link rel="prefetch" href="/assets/js/59.cfa58cdd.js"><link rel="prefetch" href="/assets/js/60.fa078818.js"><link rel="prefetch" href="/assets/js/61.5960fc89.js"><link rel="prefetch" href="/assets/js/62.398d3a50.js"><link rel="prefetch" href="/assets/js/63.e1481903.js"><link rel="prefetch" href="/assets/js/64.cf27d4d4.js"><link rel="prefetch" href="/assets/js/65.1c9d0cb2.js"><link rel="prefetch" href="/assets/js/66.27a938e1.js"><link rel="prefetch" href="/assets/js/67.c20526c6.js"><link rel="prefetch" href="/assets/js/68.3f3d5d15.js"><link rel="prefetch" href="/assets/js/69.65c8d591.js"><link rel="prefetch" href="/assets/js/7.28dee799.js"><link rel="prefetch" href="/assets/js/70.e51a9802.js"><link rel="prefetch" href="/assets/js/71.e461f8e9.js"><link rel="prefetch" href="/assets/js/72.5e703e7b.js"><link rel="prefetch" href="/assets/js/73.44ef9962.js"><link rel="prefetch" href="/assets/js/74.d21eee81.js"><link rel="prefetch" href="/assets/js/75.52e77de1.js"><link rel="prefetch" href="/assets/js/76.1ce9e222.js"><link rel="prefetch" href="/assets/js/77.868745dd.js"><link rel="prefetch" href="/assets/js/78.503e6638.js"><link rel="prefetch" href="/assets/js/79.24736f95.js"><link rel="prefetch" href="/assets/js/8.a42d882d.js"><link rel="prefetch" href="/assets/js/9.58f3ec84.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e9e545df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6c970851.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/icon.svg" alt="FluentCRM Developers" class="logo"> <span class="site-name can-hide">FluentCRM Developers</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><span class="title">Database</span> <span class="arrow down"></span></button> <button type="button" aria-label="Database" class="mobile-dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/" class="nav-link router-link-active">
  Database Schema
</a></li><li class="dropdown-item"><!----> <a href="/database/models/" class="nav-link">
  Database Models
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Hooks" class="dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Hooks" class="mobile-dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hooks/actions/" class="nav-link">
  Action Hooks
</a></li><li class="dropdown-item"><!----> <a href="/hooks/filters/" class="nav-link">
  Filter Hooks
</a></li><li class="dropdown-item"><!----> <a href="/global-functions/" class="nav-link">
  Global Functions
</a></li><li class="dropdown-item"><!----> <a href="/helpers/" class="nav-link">
  Helpers Classes
</a></li><li class="dropdown-item"><!----> <a href="/cli/" class="nav-link">
  CLI
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Modules" class="dropdown-title"><span class="title">Modules</span> <span class="arrow down"></span></button> <button type="button" aria-label="Modules" class="mobile-dropdown-title"><span class="title">Modules</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/modules/automation/" class="nav-link">
  Automation
</a></li><li class="dropdown-item"><!----> <a href="/modules/smart-code/" class="nav-link">
  Smart Codes
</a></li><li class="dropdown-item"><!----> <a href="/modules/contact-profile-section/" class="nav-link">
  Contact's Profile
</a></li><li class="dropdown-item"><!----> <a href="/extending-rest-api/" class="nav-link">
  Extending REST API
</a></li></ul></div></div><div class="nav-item"><a href="https://fluentcrm.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://rest-api.fluentcrm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  REST API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/fluentcrm/fluent-crm-developers-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/getting-started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><span class="title">Database</span> <span class="arrow down"></span></button> <button type="button" aria-label="Database" class="mobile-dropdown-title"><span class="title">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/" class="nav-link router-link-active">
  Database Schema
</a></li><li class="dropdown-item"><!----> <a href="/database/models/" class="nav-link">
  Database Models
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Developer Hooks" class="dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Developer Hooks" class="mobile-dropdown-title"><span class="title">Developer Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hooks/actions/" class="nav-link">
  Action Hooks
</a></li><li class="dropdown-item"><!----> <a href="/hooks/filters/" class="nav-link">
  Filter Hooks
</a></li><li class="dropdown-item"><!----> <a href="/global-functions/" class="nav-link">
  Global Functions
</a></li><li class="dropdown-item"><!----> <a href="/helpers/" class="nav-link">
  Helpers Classes
</a></li><li class="dropdown-item"><!----> <a href="/cli/" class="nav-link">
  CLI
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Modules" class="dropdown-title"><span class="title">Modules</span> <span class="arrow down"></span></button> <button type="button" aria-label="Modules" class="mobile-dropdown-title"><span class="title">Modules</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/modules/automation/" class="nav-link">
  Automation
</a></li><li class="dropdown-item"><!----> <a href="/modules/smart-code/" class="nav-link">
  Smart Codes
</a></li><li class="dropdown-item"><!----> <a href="/modules/contact-profile-section/" class="nav-link">
  Contact's Profile
</a></li><li class="dropdown-item"><!----> <a href="/extending-rest-api/" class="nav-link">
  Extending REST API
</a></li></ul></div></div><div class="nav-item"><a href="https://fluentcrm.com/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://rest-api.fluentcrm.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  REST API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/fluentcrm/fluent-crm-developers-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Database Schema</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/database/models/" class="sidebar-link">Model Basic</a></li><li><a href="/database/query-builder/" class="sidebar-link">Query Builder</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database Models</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Fluent ORM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/orm/" aria-current="page" class="sidebar-link">Getting Started</a></li><li><a href="/database/orm/relationship/" class="sidebar-link">Relationships</a></li><li><a href="/database/orm/collections/" class="sidebar-link">Collections</a></li><li><a href="/database/orm/mutators/" aria-current="page" class="active sidebar-link">Mutators</a></li><li><a href="/database/orm/serialization/" class="sidebar-link">Serialization</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fluent-orm-mutators"><a href="#fluent-orm-mutators" class="header-anchor">#</a> Fluent ORM: Mutators</h1> <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Fluent Framework</span> <span class="badge warning" style="vertical-align:top;" data-v-15b7b770>ORM</span> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Accessors and mutators allow you to format Fluent ORM attribute values when you retrieve or set them on model instances.</p> <h2 id="accessors-mutators"><a href="#accessors-mutators" class="header-anchor">#</a> Accessors &amp; Mutators</h2> <h3 id="defining-an-accessor"><a href="#defining-an-accessor" class="header-anchor">#</a> Defining An Accessor</h3> <p>To define an accessor, create a <code>getFirstNameAttribute</code> method on your model where Foo is the &quot;studly&quot; cased name of the column you wish to access. In this example, we'll define an accessor for the <code>first_name</code> attribute. The accessor will automatically be called by Fluent ORM when attempting to retrieve the value of the <code>first_name</code> attribute:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Get the user's first name.
     *
     * @param  string  $value
     * @return string
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">ucfirst</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>As you can see, the original value of the column is passed to the accessor, allowing you to manipulate and return the value. To access the value of the accessor, you may access the <code>first_name</code> attribute on a model instance:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$firstName</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">first_name</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Of course, you may also use accessors to return new, computed values from existing attributes:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">/**
 * Get the user's full name.
 *
 * @return string
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getFullNameAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string double-quoted-string">&quot;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">first_name</span><span class="token punctuation">}</span></span> <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">last_name</span><span class="token punctuation">}</span></span>&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="defining-a-mutator"><a href="#defining-a-mutator" class="header-anchor">#</a> Defining A Mutator</h3> <p>To define a mutator, define a <code>setFirstNameAttribute</code> method on your model where Foo is the &quot;studly&quot; cased name of the column you wish to access. So, again, let's define a mutator for the <code>first_name</code> attribute. This mutator will be automatically called when we attempt to set the value of the <code>first_name</code> attribute on the model:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Set the user's first name.
     *
     * @param  string  $value
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">setFirstNameAttribute</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">attributes</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'first_name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>The mutator will receive the value that is being set on the attribute, allowing you to manipulate the value and set the manipulated value on the Fluent ORM model's internal <code>$attributes</code> property. So, for example, if we attempt to set the <code>first_name</code> attribute to Foo:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">first_name</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'Foo'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>In this example, the <code>setFirstNameAttribute</code> function will be called with the value <code>Foo</code>. The mutator will then apply the <code>strtolower</code> function to the name and set its resulting value in the internal <code>$attributes</code> <code>array</code>.</p> <h3 id="date-mutators"><a href="#date-mutators" class="header-anchor">#</a> Date Mutators</h3> <p>By default, Fluent ORM will convert the <code>created_at</code> and <code>updated_at</code> columns to instances of <code>DateTime</code>, which provide an assortment of helpful methods. You may customize which dates are automatically mutated, and even completely disable this mutation, by overriding the <code>$dates</code> property of your model:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The attributes that should be mutated to dates.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dates</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'created_at'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'updated_at'</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">'deleted_at'</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>When a column is considered a date, you may set its value to a UNIX timestamp, date string <code>(Y-m-d)</code>, date-time string, and of course a <code>DateTime</code> instance, and the date's value will automatically be correctly stored in your database:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">deleted_at</span> <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>As noted above, when retrieving attributes that are listed in your <code>$dates</code> property, they will automatically be cast to <code>DateTime</code> instances, allowing you to use any of <code>DateTime</code>'s methods on your attributes:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">deleted_at</span><span class="token operator">-&gt;</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="date-formats"><a href="#date-formats" class="header-anchor">#</a> Date Formats</h3> <p>By default, timestamps are formatted as <code>Y-m-d H:i:s</code>. If you need to customize the timestamp format, set the <code>$dateFormat</code> property on your model. This property determines how date attributes are stored in the database, as well as their format when the model is serialized to an array or JSON:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Flight</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The storage format of the model's date columns.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$dateFormat</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'U'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="attribute-casting"><a href="#attribute-casting" class="header-anchor">#</a> Attribute Casting</h2> <p>The <code>$casts</code> property on your model provides a convenient method of converting attributes to common data types. The <code>$casts</code> property should be an array where the key is the name of the attribute being cast and the value is the type you wish to cast the column to. The supported cast types are: <code>int</code>, <code>integer</code>, <code>real</code>, <code>float</code>, <code>double</code>, <code>string</code>, <code>boolean</code>, <code>bool</code>, <code>object</code>, <code>array</code>, <code>json</code>, <code>collection</code>, <code>date</code>, <code>datetime</code>, and <code>timestamp</code>.</p> <p>For example, let's cast the <code>is_admin</code> attribute, which is stored in our database as an integer <code>(0 or 1)</code> to a boolean value:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The attributes that should be cast to native types.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'is_admin'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'boolean'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Now the <code>is_admin</code> attribute will always be cast to a boolean when you access it, even if the underlying value is stored in the database as an integer:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">is_admin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="array-json-casting"><a href="#array-json-casting" class="header-anchor">#</a> Array &amp; JSON Casting</h2> <p>The <code>array</code> cast type is particularly useful when working with columns that are stored as serialized JSON. For example, if your database has a JSON or TEXT field type that contains serialized JSON, adding the array cast to that attribute will automatically deserialize the attribute to a PHP array when you access it on your Eloquent model:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
 
<span class="token keyword">namespace</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models</span><span class="token punctuation">;</span>
 
<span class="token keyword">use</span> <span class="token package">FluentCrm<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Orm<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The attributes that should be cast to native types.
     *
     * @var array
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">'options'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'array'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Once the cast is defined, you may access the <code>options</code> attribute and it will automatically be deserialized from JSON into a PHP array. When you set the value of the <code>options</code> attribute, the given array will automatically be serialized back into JSON for storage:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">FluentCrm<span class="token punctuation">\</span>App<span class="token punctuation">\</span>Models<span class="token punctuation">\</span>User</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">options</span><span class="token punctuation">;</span>
 
<span class="token variable">$options</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'key'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'value'</span><span class="token punctuation">;</span>
 
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">options</span> <span class="token operator">=</span> <span class="token variable">$options</span><span class="token punctuation">;</span>
 
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="date-casting"><a href="#date-casting" class="header-anchor">#</a> Date Casting</h2> <p>When using the <code>date</code> or <code>datetime</code> cast type, you may specify the date's format.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">/**
 * The attributes that should be cast to native types.
 *
 * @var array
 */</span>
<span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">'created_at'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'datetime:Y-m-d'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fluentcrm/fluent-crm-developers-docs/edit/master/src/database/orm/mutators.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/12/2022, 12:50:11 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/database/orm/collections/" class="prev">
        Collections
      </a></span> <span class="next"><a href="/database/orm/serialization/">
        Serialization
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c076c778.js" defer></script><script src="/assets/js/4.202d7228.js" defer></script><script src="/assets/js/37.a342a481.js" defer></script><script src="/assets/js/6.25d6c35f.js" defer></script><script src="/assets/js/5.36d7588c.js" defer></script>
  </body>
</html>
